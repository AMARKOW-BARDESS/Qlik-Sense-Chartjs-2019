var visualize=function(e,t,a,n){var o=t.qInfo.qId+"_chartjs_bar",l=n.calculateMargin(e,t),i=l[0],r=l[1];e.html('<canvas id="'+o+'" width="'+i+'" height="'+r+'"></canvas>');var u=n.defineColorPalette(t.color_selection),c=t.qHyperCube.qDataPages[0].qMatrix,s=12;"one-handred"==t.color_selection&&(s=100);var d=c.map(function(e,a){return"rgba("+u[a%s]+","+t.opacity+")"});t.cumulative&&(c=n.addCumulativeValues(c));var m=document.getElementById(o);new Chart(m,{type:t.pie_doughnut,data:{labels:c.map(function(e){return e[0].qText}),datasets:[{label:t.qHyperCube.qMeasureInfo[0].qFallbackTitle,fill:t.background_color_switch,data:c.map(function(e){return e[1].qNum}),backgroundColor:d,borderColor:d,pointBackgroundColor:d,borderWidth:1}]},options:{title:{display:t.title_switch,text:t.title},legend:{display:"hide"!=t.legend_position,position:t.legend_position,onClick:function(e,t){var n=[],o=0;c[t.index][0].qElemNumber<0||(n.push(c[t.index][0].qElemNumber),a.selectValues(o,n,!0))}},scale:{ticks:{beginAtZero:!0,callback:function(e,a,o){return n.formatMeasure(e,t,0)}}},tooltips:{mode:"label",callbacks:{label:function(e,a){return a.labels[e.index]+": "+n.formatMeasure(a.datasets[0].data[e.index],t,0)}}},responsive:!0,events:["mousemove","mouseout","click","touchstart","touchmove","touchend"],onClick:function(e){var t=this.getElementsAtEvent(e);t.length>0&&n.makeSelectionsOnDataPoints(c[t[0]._index][0].qElemNumber,a)}}})};