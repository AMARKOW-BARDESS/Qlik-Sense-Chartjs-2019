var visualize=function(e,t,a,o){var i=t.qInfo.qId+"_chartjs_stacked_bar",l=o.calculateMargin(e,t),n=l[0],r=l[1];e.html('<canvas id="'+i+'" width="'+n+'" height="'+r+'"></canvas>');var s=o.defineColorPalette(t.color_selection),c=t.qHyperCube.qDataPages[0].qMatrix,d=o.flattenData(c),u=d[0],m=d[1],v=d[2];t.sort&&m.sort();var h=_.groupBy(u,"dim1"),p=[];p.dim1=[],p.dim1_elem=[],p=o.initializeArrayWithZero(_.size(h),m,p),p=o.storeHypercubeDataToArray(h,p),t.cumulative&&(p=o.addCumulativeValuesOnTwoDimensions(m,p));for(var b=[],g=0;g<m.length;g++){var f=[],y=g;"twelve"==t.color_selection?y=g%12:"one-handred"==t.color_selection&&(y=g%100),f.label=m[g],f.backgroundColor="rgba("+s[y]+","+t.opacity+")",f.data=p[m[g]],f.fill=t.background_color_switch,f.borderColor="rgba("+s[y]+","+t.opacity+")",f.pointBackgroundColor="#FFFFFF",f.pointRadius=t.point_radius_size,b.push(f)}var k={labels:p.dim1,datasets:b},C=document.getElementById(i);new Chart(C,{type:"radar",data:k,options:{title:{display:t.title_switch,text:t.title},legend:{display:"hide"!=t.legend_position,position:t.legend_position,onClick:function(e,t){var o=[],i=1;v[t.text]<0||(o.push(v[t.text]),a.selectValues(i,o,!0))}},scale:{ticks:{beginAtZero:!0,callback:function(e,a,i){return o.formatMeasure(e,t,0)}}},tooltips:{mode:"label",callbacks:{label:function(e,a){return a.datasets[e.datasetIndex].label+": "+o.formatMeasure(e.yLabel,t,0)}}},responsive:!0,events:["mousemove","mouseout","click","touchstart","touchmove","touchend"],onClick:function(e){var t=this.getElementsAtEvent(e);t.length>0&&o.makeSelectionsOnDataPoints(p.dim1_elem[t[0]._index],a)}}})};