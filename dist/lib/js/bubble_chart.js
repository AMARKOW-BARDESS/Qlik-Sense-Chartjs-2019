var visualize=function(e,a,t,l){function n(e,a,n){var i=a.qInfo.qId+"_chartjs_bubble",o=l.calculateMargin(e,a),r=o[0],s=o[1],u=l.defineColorPalette("palette");e.html('<canvas id="'+i+'" width="'+r+'" height="'+s+'"></canvas>');var c=n,b=a.qHyperCube.qMeasureInfo.length,d="",q=a.bubble_size,m=c.length;if(3==b){var f=m>30?30:m,p=a.qHyperCube.qMeasureInfo[2].qMin,h=a.qHyperCube.qMeasureInfo[2].qMax;d=h-p>0?(h-p)/f:h/f}a.cumulative&&(c=l.addCumulativeValues(c));var g=document.getElementById(i);new Chart(g,{type:"bubble",data:{datasets:[{label:a.qHyperCube.qDimensionInfo[0].qFallbackTitle,data:c.map(function(e){return 2==b?{label:e[0].qText,x:e[1].qNum,y:e[2].qNum,r:q}:{label:e[0].qText,x:e[1].qNum,y:e[2].qNum,z:e[3].qNum,r:Math.floor(e[3].qNum/d/f*q)}}),backgroundColor:"rgba("+u[a.color]+","+a.opacity+")",borderColor:"rgba("+u[a.color]+","+a.opacity+")",borderWidth:1}]},options:{title:{display:a.title_switch,text:a.title},legend:{display:"hide"!=a.legend_position,position:a.legend_position,onClick:function(e,a){}},scales:{xAxes:[{scaleLabel:{display:a.datalabel_switch,labelString:a.qHyperCube.qMeasureInfo[0].qFallbackTitle},ticks:{beginAtZero:!0,callback:function(e,t,n){return l.formatMeasure(e,a,0)}}}],yAxes:[{scaleLabel:{display:a.datalabel_switch,labelString:a.qHyperCube.qMeasureInfo[1].qFallbackTitle},ticks:{beginAtZero:!0,callback:function(e,t,n){return l.formatMeasure(e,a,1)}}}]},tooltips:{mode:"label",callbacks:{label:function(e,t){var n=t.datasets[0].data[e.index].label+": "+l.formatMeasure(t.datasets[0].data[e.index].x,a,0)+", "+l.formatMeasure(t.datasets[0].data[e.index].y,a,1);return 2==b?n:n+", "+l.formatMeasure(t.datasets[0].data[e.index].z,a,2)}}},responsive:!0,events:["mousemove","mouseout","click","touchstart","touchmove","touchend"],onClick:function(e){var a=this.getElementsAtEvent(e);a.length>0&&l.makeSelectionsOnDataPoints(c[a[0]._index][0].qElemNumber,t)}}})}l.pageExtensionData(t,e,a,n)};